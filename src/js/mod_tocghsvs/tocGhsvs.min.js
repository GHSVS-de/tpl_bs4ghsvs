(function(){"use strict";var t={};t.prototype={headingElementsArr:[],headingsLength:0,dropdownHTML:null,containerWithHeadings:null,config:{divTitle:"",divRole:"complementary",divAriaLabel:"",ulRole:"menu",ulAriaLabel:"Scroll to headline...",headings:"h1, h2, h3, h4, h5, h6",enumerateElements:"false",attachElement:"",divId:"scrollToHeadlineMenu",containerWithHeadings:"div.TOC_GHSVS",hideIfNothingFound:"",moduleId:"",textLimit:30,fragmentLimit:30,ulId:"tocGhsvsUL-%s",ulClass:"tocGhsvsClass toc-list-group list-unstyled",liClass:"toc-list-group-item",indentChar:"",divClass:"div4Toc",forceIsItVisibleClasses:[],displayInvisible:"true",currentUri:"",noTabindexClasses:["accordion-toggle","accordion-button"]},setUpConfig:function(t){var e,i=this.config,n=void 0!==t.settings?t.settings.TocGhsvs:{};for(e in n)i.hasOwnProperty(e)&&"[DEFAULT]"!==n[e]&&(i[e]=n[e])},init:function(t){let e=null;if(this.setUpConfig(t),this.config.containerWithHeadings&&this.config.attachElement&&(this.containerWithHeadings=document.querySelector(this.config.containerWithHeadings),e=document.querySelector(this.config.attachElement)),null!==this.containerWithHeadings&&null!==e){this.getHeadings();var i=this.config.divId;if(null!==document.getElementById(i)){var n=document.getElementById(i);n.parentNode.removeChild(n)}var s=document.createElement("div"),r="";if(s.setAttribute("id",i),this.config.divRole&&s.setAttribute("role",this.config.divRole),this.config.divTitle&&s.setAttribute("title",this.config.divTitle),this.config.divAriaLabel&&s.setAttribute("aria-label",this.config.divAriaLabel),this.dropdownHTML="",this.headingsLength>0){let t="";this.config.ulId&&(t=' id="'+this.config.ulId.replace("%s",this.config.moduleId)+'"'),this.config.ulClass&&(t+=' class="'+this.config.ulClass+'"'),this.config.ulRole&&(t+=' role="'+this.config.ulRole+'"'),this.config.ulRole&&(t+=' role="'+this.config.ulRole+'"'),this.config.ulAriaLabel&&(t+=' aria-label="'+this.config.ulAriaLabel+'"'),this.dropdownHTML+='<p><a class="btn btn-secondary btn-sm" href="'+this.config.currentUri+'#TOP">Seitenanfang</a> ',this.dropdownHTML+='<a class="btn btn-secondary btn-sm" href="'+this.config.currentUri+'#BOTTOM">Seitenende</a></p>',this.dropdownHTML+="<div"+t+">",r=this.getdropdownHTML(),this.dropdownHTML+=r+"</div>"}else r="<p>Leider kein Inhaltsverzeichnis verfügbar</p>",this.dropdownHTML=r;r.length>0&&(s.className=this.config.divClass,e.insertBefore(s,e.firstChild),s.innerHTML=this.dropdownHTML),this.headingsLength||this.hideIfNothingFound()}else this.hideIfNothingFound()},hideIfNothingFound:function(){this.config.hideIfNothingFound&&null!==document.querySelector(this.config.hideIfNothingFound)&&this.addStyles(`${this.config.hideIfNothingFound}{display:none !important;visibility: hidden !important`)},normalizeName:function(t){return"string"==typeof t?t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}):""},getTextContent:function(t){function e(t,i){if(3===t.nodeType)i.push(t.data);else if(1===t.nodeType){var n=t.tagName.toLowerCase();if("img"===n||"area"===n)t.alt&&i.push(t.alt);else for(var s=t.firstChild;s;)e(s,i),s=s.nextSibling}}var i="",n=[];return e(t,n),n.length&&(i=n.join(" ")),i.length>this.config.textLimit&&(i=i.substring(0,this.config.textLimit-3)+"..."),i},getHeadings:function(){var t=this.config.headings;if("string"==typeof t&&0!==t.length){this.headingElementsArr=[];var e,i,n,s,r,o,a,l,d=this.containerWithHeadings.querySelectorAll(t);for(this.headingsLength=d.length,e=0,i=d.length;e<i;e+=1)n=d[e],s=n.getAttribute("role"),"string"==typeof s&&"presentation"===s||(a=this.isVisible(n,this.config.forceIsItVisibleClasses),n.getAttribute("id")?r=n.getAttribute("id"):(r=n.innerText.replace(/\s+/g,"_").toLowerCase().replace(/[&\/\\#,+()$~%.'"!:*?<>{}¹]/g,""),r.length>this.config.fragmentLimit&&(r=r.substring(0,this.config.fragmentLimit)),r=r.replace(/_+$/g,""),r+="_"+e),this.config.noTabindexClasses.some(t=>n.classList.contains(t))||(n.tabIndex="-1"),n.setAttribute("id",r),n.setAttribute("class","isATocId "+n.className),o=this.getTextContent(n),l=n.tagName.toLowerCase(),this.headingElementsArr[e]={id:r,name:o,prefix:l,isItVisible:a})}},isVisible:function(t,e){function i(t,e){var n,s;if(9===t.nodeType)return!0;var r=document.defaultView?document.defaultView.getComputedStyle(t,null).getPropertyValue("display"):t.currentStyle.display,o=document.defaultView?document.defaultView.getComputedStyle(t,null).getPropertyValue("visibility"):t.currentStyle.visibility,a=t.getAttribute("hidden"),l=(t.getAttribute("aria-hidden"),t.getBoundingClientRect());if("none"===r||"hidden"===o||null!==a||l.height<4||l.width<4){for(n=0,s=e.length;n<s;n+=1)if(t.classList.contains(e[n]))return!0;return!1}return i(t.parentNode,e)}return i(t,e)},getdropdownHTML:function(){var t,e="",i=1,n="",s="",r="",o=0,a=0,l=this.config.displayInvisible;for(t in this.headingElementsArr)if(o<this.headingsLength&&this.headingElementsArr[t].name){var d=!1===this.headingElementsArr[t].isItVisible&&"false"===l;if(!d){this.config.indentChar&&(s=this.headingElementsArr[t].prefix,a=parseInt(s.substring(1)),a?(n=this.config.indentChar.repeat(a)+"| ",""):(n="|---","---|"));let o=' class="'+this.config.liClass+" list-group-item-action po-"+this.headingElementsArr[t].prefix+'"';!1!==this.headingElementsArr[t].isItVisible?e+='<a  href="'+this.config.currentUri+"#"+this.headingElementsArr[t].id+'" '+o+">":e+='<span class="isItVisibleFalse" aria-label="Has no link! Hat keine Sprungmarke!">',"false"!==this.config.enumerateElements?(r=i,i+=1):r=this.headingElementsArr[t].prefix,e+=`<span aria-hidden="true">${n}</span>\n\t\t\t\t\t\t\t<span class="listEntryPrefix">${r}: </span>\n\t\t\t\t\t\t\t${this.headingElementsArr[t].name}`,!1!==this.headingElementsArr[t].isItVisible?e+="</a>":e+="</span>"}o+=1}return e},addStyles:function(t){var e,i=document.createElement("style"),n=document.getElementsByTagName("head")[0];i.setAttribute("type","text/css"),n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:(e=document.createTextNode(t),i.appendChild(e))}},window.tocGhsvsInit=function(e){t.prototype.init(e)}})();